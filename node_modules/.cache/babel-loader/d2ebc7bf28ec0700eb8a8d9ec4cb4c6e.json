{"ast":null,"code":"var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport React, { PureComponent } from 'react';\nimport { findDOMNode } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport TransitionGroup from 'react-transition-group/TransitionGroup';\nimport cn from 'classnames';\nimport { ENTER, SPACE } from '../constants/keyCodes';\nimport isFormPartRole from '../utils/isFormPartRole';\nimport calcPageOffset from '../utils/Positioning/calcPageOffset';\nimport isValidClick from '../utils/EventUtils/isValidClick';\nimport { setTouchEvent, addTouchEvent, removeTouchEvent } from '../utils/EventUtils/touches';\nimport captureNextEvent from '../utils/EventUtils/captureNextEvent';\nimport calculateHypotenuse from '../utils/NumberUtils/calculateHypotenuse';\nimport Ink from './Ink';\n/**\n * The `InkContainer` is used for holding the list of inks that get created by touch,\n * click, or keyboard focus.\n *\n * If the container element has the `type=\"submit\"` attribute, the ink will also be\n * triggered when the user presses enter anywhere in the form.\n */\n\nvar InkContainer = function (_PureComponent) {\n  _inherits(InkContainer, _PureComponent);\n\n  function InkContainer() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, InkContainer);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _PureComponent.call.apply(_PureComponent, [this].concat(args))), _this), _this.state = {\n      inks: []\n    }, _this.createInk = function (pageX, pageY) {\n      _this._createInk(pageX, pageY);\n\n      _this._removeTimeout = setTimeout(function () {\n        _this._removeTimeout = null;\n\n        _this._removeInk();\n      }, _this.props.transitionOverlap);\n    }, _this.focus = function () {\n      _this._getKeyboardContainer().focus();\n    }, _this._createInk = function (pageX, pageY) {\n      var _this$_inkContainer = _this._inkContainer,\n          offsetWidth = _this$_inkContainer.offsetWidth,\n          offsetHeight = _this$_inkContainer.offsetHeight;\n      var x = void 0;\n      var y = void 0;\n\n      if (typeof pageX !== 'undefined' && typeof pageY !== 'undefined') {\n        var pageOffset = calcPageOffset(_this._inkContainer);\n        x = pageX - pageOffset.left;\n        y = pageY - pageOffset.top;\n      } else {\n        x = offsetWidth / 2;\n        y = offsetHeight / 2;\n      }\n\n      var r = Math.max(calculateHypotenuse(x, y), calculateHypotenuse(offsetWidth - x, y), calculateHypotenuse(offsetWidth - x, offsetHeight - y), calculateHypotenuse(x, offsetHeight - y));\n      var ink = {\n        left: x - r,\n        top: y - r,\n        size: r * 2,\n        key: Date.now()\n      };\n\n      var inks = _this.state.inks.slice();\n\n      inks.push(ink);\n\n      _this.setState({\n        inks: inks\n      });\n    }, _this._removeInk = function () {\n      var inks = _this.state.inks.slice();\n\n      inks.pop();\n\n      _this.setState({\n        inks: inks\n      });\n    }, _this._getKeyboardContainer = function () {\n      if (_this._container.classList.contains('md-text-field-container')) {\n        return _this._container.querySelector('.md-text-field');\n      }\n\n      return _this._container;\n    }, _this._setContainers = function (group) {\n      if (group !== null) {\n        _this._inkContainer = findDOMNode(group);\n        _this._container = _this._inkContainer.parentElement;\n\n        if (_this._container) {\n          _this._initOrRemoveEvents(_this.props);\n        }\n      }\n    }, _this._initOrRemoveEvents = function (props) {\n      var keyboardDiff = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var mouseDiff = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      var touchDiff = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n\n      var mouseDisabled = _this._isListenerDisabled('mouse', props.disabledInteractions);\n\n      var touchDisabled = _this._isListenerDisabled('touch', props.disabledInteractions);\n\n      var keyboardDisabled = _this._isListenerDisabled('keyboard', props.disabledInteractions);\n\n      if (keyboardDiff) {\n        var fn = (keyboardDisabled ? 'remove' : 'add') + 'EventListener';\n\n        _this._getKeyboardContainer()[fn]('focus', _this._handleFocus);\n\n        _this._getKeyboardContainer()[fn]('keydown', _this._handleKeyDown);\n\n        if (_this._container.getAttribute('type') === 'submit') {\n          window[fn]('submit', _this._handleSubmit);\n        }\n\n        if (mouseDiff) {\n          _this._container[(!mouseDisabled ? 'add' : 'remove') + 'EventListener']('mousedown', _this._stopPropagationToFocus);\n        }\n\n        if (touchDiff) {\n          setTouchEvent(!touchDisabled, _this._container, 'start', _this._stopPropagationToFocus);\n        }\n      }\n\n      if (mouseDiff) {\n        var _fn = (mouseDisabled ? 'remove' : 'add') + 'EventListener';\n\n        _this._container[_fn]('mousedown', _this._handleMouseDown);\n\n        _this._container[_fn]('mouseup', _this._handleMouseUp);\n      }\n\n      if (touchDiff) {\n        setTouchEvent(!touchDisabled, _this._container, 'start', _this._handleTouchStart);\n        setTouchEvent(!touchDisabled, _this._container, 'end', _this._handleTouchEnd);\n      }\n    }, _this._maybeDelayClick = function () {\n      if (!_this.props.waitForInkTransition) {\n        return;\n      }\n\n      captureNextEvent('click', _this._container);\n    }, _this._handleRemove = function () {\n      if (_this._clicked && _this.props.waitForInkTransition) {\n        // For some reason if the click event will make the ink unmount, it will no longer\n        // have a debug id in the TransitionGroup and it displays a warning. Adding a 1ms timeout\n        // fixes that issue... It only happens on an actual click instead of an enter click.\n        setTimeout(function () {\n          _this._container.click();\n        }, 1);\n      }\n\n      _this._clicked = false;\n    }, _this._handleKeyDown = function (e) {\n      var key = e.which || e.keyCode;\n      var enter = key === ENTER;\n      var space = key === SPACE; // Don't trigger ink when enter key is pressed and the target has an input inside of it (SelectField)\n\n      if (space || enter && !isFormPartRole(e.target) && !e.target.querySelector('input')) {\n        _this._clicked = true;\n\n        _this.createInk();\n\n        _this._maybeDelayClick();\n      }\n    }, _this._handleFocus = function () {\n      if (_this._clicked) {\n        return;\n      }\n\n      _this._createInk();\n\n      _this._getKeyboardContainer().addEventListener('blur', _this._handleBlur);\n    }, _this._handleBlur = function () {\n      _this._getKeyboardContainer().removeEventListener('blur', _this._handleBlur);\n\n      _this._removeInk();\n    }, _this._handleMouseDown = function (e) {\n      _this._clicked = true;\n\n      if (!isValidClick(e) || _this._skipNextMouse) {\n        _this._skipNextMouse = false;\n        return;\n      }\n\n      _this._mouseLeave = false;\n\n      _this._container.addEventListener('mouseleave', _this._handleMouseLeave);\n\n      _this._createInk(e.pageX, e.pageY);\n    }, _this._handleMouseLeave = function () {\n      _this._container.removeEventListener('mouseleave', _this._handleMouseLeave);\n\n      _this._mouseLeave = true;\n\n      _this._removeInk();\n    }, _this._handleMouseUp = function () {\n      if (_this._mouseLeave) {\n        return;\n      }\n\n      _this._maybeDelayClick();\n\n      _this._container.removeEventListener('mouseleave', _this._handleMouseLeave);\n\n      _this._removeInk();\n    }, _this._handleTouchStart = function (e) {\n      _this._aborted = false;\n      _this._clicked = true;\n      _this._skipNextMouse = true;\n      addTouchEvent(window, 'move', _this._handleTouchMove);\n      var _e$changedTouches$ = e.changedTouches[0],\n          pageX = _e$changedTouches$.pageX,\n          pageY = _e$changedTouches$.pageY;\n\n      _this._createInk(pageX, pageY);\n    }, _this._handleTouchMove = function () {\n      removeTouchEvent(window, 'move', _this._handleTouchMove);\n      var lastInk = _this.state.inks[_this.state.inks.length - 1];\n\n      if (!lastInk || Date.now() > lastInk.key + 200) {\n        _this._aborted = false;\n        return;\n      }\n\n      var inks = _this.state.inks.slice();\n\n      var index = inks.length - 1;\n      var abortedInk = Object.assign({}, lastInk, {\n        aborted: true\n      });\n      inks.splice(index, 1, abortedInk);\n      _this._aborted = true;\n\n      _this.setState({\n        inks: inks\n      }, _this._removeInk);\n    }, _this._handleTouchEnd = function () {\n      _this._skipNextMouse = true;\n\n      if (_this._aborted) {\n        return;\n      } else {\n        removeTouchEvent(window, 'move', _this._handleTouchMove);\n      }\n\n      _this._removeInk();\n    }, _this._handleSubmit = function (e) {\n      if (document.activeElement === _this._container || !e.target.contains(_this._container)) {\n        return;\n      }\n\n      _this._maybeDelayClick();\n\n      _this.createInk();\n    }, _this._stopPropagationToFocus = function (e) {\n      switch (e.type) {\n        case 'touchstart':\n          addTouchEvent(window, 'end', _this._stopPropagationToFocus, {\n            capture: true\n          });\n          break;\n\n        case 'touchend':\n          removeTouchEvent(window, 'end', _this._stopPropagationToFocus, {\n            capture: true\n          });\n          break;\n\n        case 'mousedown':\n          window.addEventListener('mouseup', _this._stopPropagationToFocus, true);\n          break;\n\n        case 'mouseup':\n          window.removeEventListener('mouseup', _this._stopPropagationToFocus, true);\n          break;\n\n        default:\n      }\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  InkContainer.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    var di = this.props.disabledInteractions;\n    var ndi = nextProps.disabledInteractions;\n\n    if (di === ndi || !this._container) {\n      return;\n    }\n\n    var mouseDisabledDiff = this._isListenerDisabledDiff('mouse', di, ndi);\n\n    var touchDisabledDiff = this._isListenerDisabledDiff('touch', di, ndi);\n\n    var keyboardDisabledDiff = this._isListenerDisabledDiff('keyboard', di, ndi);\n\n    this._initOrRemoveEvents(nextProps, keyboardDisabledDiff, mouseDisabledDiff, touchDisabledDiff);\n  };\n\n  InkContainer.prototype.componentWillUnmount = function componentWillUnmount() {\n    if (this._removeTimeout) {\n      clearTimeout(this._removeTimeout);\n    }\n\n    if (this._container) {\n      this._initOrRemoveEvents({\n        disabledInteractions: ['keyboard', 'mouse', 'touch']\n      });\n\n      this._getKeyboardContainer().removeEventListener('blur', this._handleBlur);\n    }\n  };\n  /**\n   * Creates an ink from pageX and pageY coordinates. These values should either come\n   * from the `changedTouches` or just the base event (if clicked). These coordinates\n   * are used to position the ink correctly in the container from touch/click point.\n   * If either value is undefined, an ink will be created from the center of the\n   * container.\n   *\n   * It will also automatically remove the ink.\n   *\n   * @param {number} pageX - The page x coordinate of the click or touch event.\n   * @param {number} pageY - The page y coordinate of the click or touch event.\n   */\n\n  /**\n   * Focuses the main element.\n   */\n\n\n  InkContainer.prototype._isListenerDisabledDiff = function _isListenerDisabledDiff(interaction, disabledInteractions, nextDisabledInteractions) {\n    var i = disabledInteractions.indexOf(interaction);\n    var ni = nextDisabledInteractions.indexOf(interaction);\n    return i < 0 && ni >= 0 || i >= 0 && ni < 0;\n  };\n\n  InkContainer.prototype._isListenerDisabled = function _isListenerDisabled(interaction, disabledInteractions) {\n    return disabledInteractions && disabledInteractions.indexOf(interaction) !== -1;\n  };\n  /**\n   * Creates an ink from pageX and pageY coordinates. These values should either come\n   * from the `changedTouches` or just the base event (if clicked). These coordinates\n   * are used to position the ink correctly in the container from touch/click point.\n   * If either value is undefined, an ink will be created from the center of the\n   * container.\n   *\n   * @param {number} pageX - The page x coordinate of the click or touch event.\n   * @param {number} pageY - The page y coordinate of the click or touch event.\n   */\n\n  /**\n   * Removes an ink from the container.\n   */\n\n  /**\n   * Gets the container for any keyboard events. This will almost always be the main element,\n   * but text fields will need to be the input itself.\n   */\n\n  /**\n   * Sets the ink container and the main container from the ref callback. When the component\n   * is mounting, the keyboard, mouse, and keyboard events will be initialized.\n   */\n\n  /**\n   * This function will either add or remove the event listeners for creating inks.\n   *\n   * @param {Object} props - The current props to use for figuring out if the events should\n   *    be added or removed.\n   * @param {bool=} keyboardDiff - Boolean if there was a difference between the current props and either\n   *    the previous or next props for the keyboard interactions being disabled.\n   * @param {bool=} mouseDiff - Boolean if there was a difference between the current props and either\n   *    the previous or next props for the mouse interactions being disabled.\n   * @param {bool=} touchDiff - Boolean if there was a difference between the current props and either\n   *    the previous or next props for the touch interactions being disabled.\n   */\n\n  /**\n   * If a form was submitted that contains the container of the ink and the current focus element\n   * is not the container, trigger an ink effect.\n   *\n   * The current focus check is added so that two inks are not created.\n   */\n\n\n  InkContainer.prototype.render = function render() {\n    var _this2 = this;\n\n    var _props = this.props,\n        style = _props.style,\n        className = _props.className,\n        inkStyle = _props.inkStyle,\n        inkClassName = _props.inkClassName,\n        transitionOverlap = _props.transitionOverlap,\n        transitionEnterTimeout = _props.transitionEnterTimeout,\n        transitionLeaveTimeout = _props.transitionLeaveTimeout,\n        pulse = _props.pulse;\n    var inks = this.state.inks.map(function (props) {\n      return React.createElement(Ink, _extends({}, props, {\n        pulse: pulse,\n        style: inkStyle,\n        className: inkClassName,\n        onRemove: _this2._handleRemove,\n        transitionOverlap: transitionOverlap,\n        transitionEnterTimeout: transitionEnterTimeout,\n        transitionLeaveTimeout: transitionLeaveTimeout\n      }));\n    });\n    return React.createElement(TransitionGroup, {\n      component: 'div',\n      style: style,\n      className: cn('md-ink-container', className),\n      ref: this._setContainers\n    }, inks);\n  };\n\n  return InkContainer;\n}(PureComponent);\n\nInkContainer.propTypes = {\n  style: PropTypes.object,\n  className: PropTypes.string,\n  inkStyle: PropTypes.object,\n  inkClassName: PropTypes.string,\n  waitForInkTransition: PropTypes.bool,\n  disabledInteractions: PropTypes.arrayOf(PropTypes.oneOf(['keyboard', 'mouse', 'touch'])),\n  transitionOverlap: PropTypes.number.isRequired,\n  transitionEnterTimeout: PropTypes.number.isRequired,\n  transitionLeaveTimeout: PropTypes.number.isRequired,\n  pulse: PropTypes.bool\n};\nInkContainer.defaultProps = {\n  transitionOverlap: 150,\n  transitionEnterTimeout: 450,\n  transitionLeaveTimeout: 300\n};\nexport default InkContainer;","map":{"version":3,"sources":["C:/Users/Sky/Desktop/info442/homeowork/node_modules/react-md/es/Inks/InkContainer.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","React","PureComponent","findDOMNode","PropTypes","TransitionGroup","cn","ENTER","SPACE","isFormPartRole","calcPageOffset","isValidClick","setTouchEvent","addTouchEvent","removeTouchEvent","captureNextEvent","calculateHypotenuse","Ink","InkContainer","_PureComponent","_temp","_this","_ret","_len","args","Array","_key","apply","concat","state","inks","createInk","pageX","pageY","_createInk","_removeTimeout","setTimeout","_removeInk","props","transitionOverlap","focus","_getKeyboardContainer","_this$_inkContainer","_inkContainer","offsetWidth","offsetHeight","x","y","pageOffset","left","top","r","Math","max","ink","size","Date","now","slice","push","setState","pop","_container","classList","contains","querySelector","_setContainers","group","parentElement","_initOrRemoveEvents","keyboardDiff","undefined","mouseDiff","touchDiff","mouseDisabled","_isListenerDisabled","disabledInteractions","touchDisabled","keyboardDisabled","fn","_handleFocus","_handleKeyDown","getAttribute","window","_handleSubmit","_stopPropagationToFocus","_fn","_handleMouseDown","_handleMouseUp","_handleTouchStart","_handleTouchEnd","_maybeDelayClick","waitForInkTransition","_handleRemove","_clicked","click","e","which","keyCode","enter","space","addEventListener","_handleBlur","removeEventListener","_skipNextMouse","_mouseLeave","_handleMouseLeave","_aborted","_handleTouchMove","_e$changedTouches$","changedTouches","lastInk","index","abortedInk","aborted","splice","document","activeElement","type","capture","componentWillReceiveProps","nextProps","di","ndi","mouseDisabledDiff","_isListenerDisabledDiff","touchDisabledDiff","keyboardDisabledDiff","componentWillUnmount","clearTimeout","interaction","nextDisabledInteractions","indexOf","ni","render","_this2","_props","style","className","inkStyle","inkClassName","transitionEnterTimeout","transitionLeaveTimeout","pulse","map","createElement","onRemove","component","ref","propTypes","object","string","bool","arrayOf","oneOf","number","isRequired","defaultProps"],"mappings":"AAAA,IAAIA,QAAQ,GAAGC,MAAM,CAACC,MAAP,IAAiB,UAAUC,MAAV,EAAkB;AAAE,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;AAAE,QAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAtB;;AAA2B,SAAK,IAAII,GAAT,IAAgBD,MAAhB,EAAwB;AAAE,UAAIN,MAAM,CAACQ,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCJ,MAArC,EAA6CC,GAA7C,CAAJ,EAAuD;AAAEL,QAAAA,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;AAA4B;AAAE;AAAE;;AAAC,SAAOL,MAAP;AAAgB,CAAhQ;;AAEA,SAASS,eAAT,CAAyBC,QAAzB,EAAmCC,WAAnC,EAAgD;AAAE,MAAI,EAAED,QAAQ,YAAYC,WAAtB,CAAJ,EAAwC;AAAE,UAAM,IAAIC,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE;;AAEzJ,SAASC,0BAAT,CAAoCC,IAApC,EAA0CN,IAA1C,EAAgD;AAAE,MAAI,CAACM,IAAL,EAAW;AAAE,UAAM,IAAIC,cAAJ,CAAmB,2DAAnB,CAAN;AAAwF;;AAAC,SAAOP,IAAI,KAAK,OAAOA,IAAP,KAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,UAAjD,CAAJ,GAAmEA,IAAnE,GAA0EM,IAAjF;AAAwF;;AAEhP,SAASE,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyC;AAAE,MAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,UAAU,KAAK,IAAvD,EAA6D;AAAE,UAAM,IAAIN,SAAJ,CAAc,6DAA6D,OAAOM,UAAlF,CAAN;AAAsG;;AAACD,EAAAA,QAAQ,CAACX,SAAT,GAAqBR,MAAM,CAACqB,MAAP,CAAcD,UAAU,IAAIA,UAAU,CAACZ,SAAvC,EAAkD;AAAEc,IAAAA,WAAW,EAAE;AAAEC,MAAAA,KAAK,EAAEJ,QAAT;AAAmBK,MAAAA,UAAU,EAAE,KAA/B;AAAsCC,MAAAA,QAAQ,EAAE,IAAhD;AAAsDC,MAAAA,YAAY,EAAE;AAApE;AAAf,GAAlD,CAArB;AAAqK,MAAIN,UAAJ,EAAgBpB,MAAM,CAAC2B,cAAP,GAAwB3B,MAAM,CAAC2B,cAAP,CAAsBR,QAAtB,EAAgCC,UAAhC,CAAxB,GAAsED,QAAQ,CAACS,SAAT,GAAqBR,UAA3F;AAAwG;;AAE9e,OAAOS,KAAP,IAAgBC,aAAhB,QAAqC,OAArC;AACA,SAASC,WAAT,QAA4B,WAA5B;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,eAAP,MAA4B,wCAA5B;AACA,OAAOC,EAAP,MAAe,YAAf;AAEA,SAASC,KAAT,EAAgBC,KAAhB,QAA6B,uBAA7B;AACA,OAAOC,cAAP,MAA2B,yBAA3B;AACA,OAAOC,cAAP,MAA2B,qCAA3B;AACA,OAAOC,YAAP,MAAyB,kCAAzB;AACA,SAASC,aAAT,EAAwBC,aAAxB,EAAuCC,gBAAvC,QAA+D,6BAA/D;AACA,OAAOC,gBAAP,MAA6B,sCAA7B;AACA,OAAOC,mBAAP,MAAgC,0CAAhC;AAEA,OAAOC,GAAP,MAAgB,OAAhB;AAEA;;;;;;;;AAQA,IAAIC,YAAY,GAAG,UAAUC,cAAV,EAA0B;AAC3C7B,EAAAA,SAAS,CAAC4B,YAAD,EAAeC,cAAf,CAAT;;AAEA,WAASD,YAAT,GAAwB;AACtB,QAAIE,KAAJ,EAAWC,KAAX,EAAkBC,IAAlB;;AAEAvC,IAAAA,eAAe,CAAC,IAAD,EAAOmC,YAAP,CAAf;;AAEA,SAAK,IAAIK,IAAI,GAAG/C,SAAS,CAACC,MAArB,EAA6B+C,IAAI,GAAGC,KAAK,CAACF,IAAD,CAAzC,EAAiDG,IAAI,GAAG,CAA7D,EAAgEA,IAAI,GAAGH,IAAvE,EAA6EG,IAAI,EAAjF,EAAqF;AACnFF,MAAAA,IAAI,CAACE,IAAD,CAAJ,GAAalD,SAAS,CAACkD,IAAD,CAAtB;AACD;;AAED,WAAOJ,IAAI,IAAIF,KAAK,IAAIC,KAAK,GAAGlC,0BAA0B,CAAC,IAAD,EAAOgC,cAAc,CAACrC,IAAf,CAAoB6C,KAApB,CAA0BR,cAA1B,EAA0C,CAAC,IAAD,EAAOS,MAAP,CAAcJ,IAAd,CAA1C,CAAP,CAAlC,EAA0GH,KAA9G,CAAL,EAA2HA,KAAK,CAACQ,KAAN,GAAc;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAzI,EAAuJT,KAAK,CAACU,SAAN,GAAkB,UAAUC,KAAV,EAAiBC,KAAjB,EAAwB;AAC9MZ,MAAAA,KAAK,CAACa,UAAN,CAAiBF,KAAjB,EAAwBC,KAAxB;;AACAZ,MAAAA,KAAK,CAACc,cAAN,GAAuBC,UAAU,CAAC,YAAY;AAC5Cf,QAAAA,KAAK,CAACc,cAAN,GAAuB,IAAvB;;AACAd,QAAAA,KAAK,CAACgB,UAAN;AACD,OAHgC,EAG9BhB,KAAK,CAACiB,KAAN,CAAYC,iBAHkB,CAAjC;AAID,KANc,EAMZlB,KAAK,CAACmB,KAAN,GAAc,YAAY;AAC3BnB,MAAAA,KAAK,CAACoB,qBAAN,GAA8BD,KAA9B;AACD,KARc,EAQZnB,KAAK,CAACa,UAAN,GAAmB,UAAUF,KAAV,EAAiBC,KAAjB,EAAwB;AAC5C,UAAIS,mBAAmB,GAAGrB,KAAK,CAACsB,aAAhC;AAAA,UACIC,WAAW,GAAGF,mBAAmB,CAACE,WADtC;AAAA,UAEIC,YAAY,GAAGH,mBAAmB,CAACG,YAFvC;AAKA,UAAIC,CAAC,GAAG,KAAK,CAAb;AACA,UAAIC,CAAC,GAAG,KAAK,CAAb;;AACA,UAAI,OAAOf,KAAP,KAAiB,WAAjB,IAAgC,OAAOC,KAAP,KAAiB,WAArD,EAAkE;AAChE,YAAIe,UAAU,GAAGtC,cAAc,CAACW,KAAK,CAACsB,aAAP,CAA/B;AAEAG,QAAAA,CAAC,GAAGd,KAAK,GAAGgB,UAAU,CAACC,IAAvB;AACAF,QAAAA,CAAC,GAAGd,KAAK,GAAGe,UAAU,CAACE,GAAvB;AACD,OALD,MAKO;AACLJ,QAAAA,CAAC,GAAGF,WAAW,GAAG,CAAlB;AACAG,QAAAA,CAAC,GAAGF,YAAY,GAAG,CAAnB;AACD;;AAED,UAAIM,CAAC,GAAGC,IAAI,CAACC,GAAL,CAASrC,mBAAmB,CAAC8B,CAAD,EAAIC,CAAJ,CAA5B,EAAoC/B,mBAAmB,CAAC4B,WAAW,GAAGE,CAAf,EAAkBC,CAAlB,CAAvD,EAA6E/B,mBAAmB,CAAC4B,WAAW,GAAGE,CAAf,EAAkBD,YAAY,GAAGE,CAAjC,CAAhG,EAAqI/B,mBAAmB,CAAC8B,CAAD,EAAID,YAAY,GAAGE,CAAnB,CAAxJ,CAAR;AAEA,UAAIO,GAAG,GAAG;AACRL,QAAAA,IAAI,EAAEH,CAAC,GAAGK,CADF;AAERD,QAAAA,GAAG,EAAEH,CAAC,GAAGI,CAFD;AAGRI,QAAAA,IAAI,EAAEJ,CAAC,GAAG,CAHF;AAIRxE,QAAAA,GAAG,EAAE6E,IAAI,CAACC,GAAL;AAJG,OAAV;;AAOA,UAAI3B,IAAI,GAAGT,KAAK,CAACQ,KAAN,CAAYC,IAAZ,CAAiB4B,KAAjB,EAAX;;AACA5B,MAAAA,IAAI,CAAC6B,IAAL,CAAUL,GAAV;;AACAjC,MAAAA,KAAK,CAACuC,QAAN,CAAe;AAAE9B,QAAAA,IAAI,EAAEA;AAAR,OAAf;AACD,KAtCc,EAsCZT,KAAK,CAACgB,UAAN,GAAmB,YAAY;AAChC,UAAIP,IAAI,GAAGT,KAAK,CAACQ,KAAN,CAAYC,IAAZ,CAAiB4B,KAAjB,EAAX;;AACA5B,MAAAA,IAAI,CAAC+B,GAAL;;AAEAxC,MAAAA,KAAK,CAACuC,QAAN,CAAe;AAAE9B,QAAAA,IAAI,EAAEA;AAAR,OAAf;AACD,KA3Cc,EA2CZT,KAAK,CAACoB,qBAAN,GAA8B,YAAY;AAC3C,UAAIpB,KAAK,CAACyC,UAAN,CAAiBC,SAAjB,CAA2BC,QAA3B,CAAoC,yBAApC,CAAJ,EAAoE;AAClE,eAAO3C,KAAK,CAACyC,UAAN,CAAiBG,aAAjB,CAA+B,gBAA/B,CAAP;AACD;;AAED,aAAO5C,KAAK,CAACyC,UAAb;AACD,KAjDc,EAiDZzC,KAAK,CAAC6C,cAAN,GAAuB,UAAUC,KAAV,EAAiB;AACzC,UAAIA,KAAK,KAAK,IAAd,EAAoB;AAClB9C,QAAAA,KAAK,CAACsB,aAAN,GAAsBxC,WAAW,CAACgE,KAAD,CAAjC;AACA9C,QAAAA,KAAK,CAACyC,UAAN,GAAmBzC,KAAK,CAACsB,aAAN,CAAoByB,aAAvC;;AAEA,YAAI/C,KAAK,CAACyC,UAAV,EAAsB;AACpBzC,UAAAA,KAAK,CAACgD,mBAAN,CAA0BhD,KAAK,CAACiB,KAAhC;AACD;AACF;AACF,KA1Dc,EA0DZjB,KAAK,CAACgD,mBAAN,GAA4B,UAAU/B,KAAV,EAAiB;AAC9C,UAAIgC,YAAY,GAAG9F,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiB+F,SAAzC,GAAqD/F,SAAS,CAAC,CAAD,CAA9D,GAAoE,IAAvF;AACA,UAAIgG,SAAS,GAAGhG,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiB+F,SAAzC,GAAqD/F,SAAS,CAAC,CAAD,CAA9D,GAAoE,IAApF;AACA,UAAIiG,SAAS,GAAGjG,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiB+F,SAAzC,GAAqD/F,SAAS,CAAC,CAAD,CAA9D,GAAoE,IAApF;;AAEA,UAAIkG,aAAa,GAAGrD,KAAK,CAACsD,mBAAN,CAA0B,OAA1B,EAAmCrC,KAAK,CAACsC,oBAAzC,CAApB;;AACA,UAAIC,aAAa,GAAGxD,KAAK,CAACsD,mBAAN,CAA0B,OAA1B,EAAmCrC,KAAK,CAACsC,oBAAzC,CAApB;;AACA,UAAIE,gBAAgB,GAAGzD,KAAK,CAACsD,mBAAN,CAA0B,UAA1B,EAAsCrC,KAAK,CAACsC,oBAA5C,CAAvB;;AAEA,UAAIN,YAAJ,EAAkB;AAChB,YAAIS,EAAE,GAAG,CAACD,gBAAgB,GAAG,QAAH,GAAc,KAA/B,IAAwC,eAAjD;;AACAzD,QAAAA,KAAK,CAACoB,qBAAN,GAA8BsC,EAA9B,EAAkC,OAAlC,EAA2C1D,KAAK,CAAC2D,YAAjD;;AACA3D,QAAAA,KAAK,CAACoB,qBAAN,GAA8BsC,EAA9B,EAAkC,SAAlC,EAA6C1D,KAAK,CAAC4D,cAAnD;;AAEA,YAAI5D,KAAK,CAACyC,UAAN,CAAiBoB,YAAjB,CAA8B,MAA9B,MAA0C,QAA9C,EAAwD;AACtDC,UAAAA,MAAM,CAACJ,EAAD,CAAN,CAAW,QAAX,EAAqB1D,KAAK,CAAC+D,aAA3B;AACD;;AAED,YAAIZ,SAAJ,EAAe;AACbnD,UAAAA,KAAK,CAACyC,UAAN,CAAiB,CAAC,CAACY,aAAD,GAAiB,KAAjB,GAAyB,QAA1B,IAAsC,eAAvD,EAAwE,WAAxE,EAAqFrD,KAAK,CAACgE,uBAA3F;AACD;;AAED,YAAIZ,SAAJ,EAAe;AACb7D,UAAAA,aAAa,CAAC,CAACiE,aAAF,EAAiBxD,KAAK,CAACyC,UAAvB,EAAmC,OAAnC,EAA4CzC,KAAK,CAACgE,uBAAlD,CAAb;AACD;AACF;;AAED,UAAIb,SAAJ,EAAe;AACb,YAAIc,GAAG,GAAG,CAACZ,aAAa,GAAG,QAAH,GAAc,KAA5B,IAAqC,eAA/C;;AACArD,QAAAA,KAAK,CAACyC,UAAN,CAAiBwB,GAAjB,EAAsB,WAAtB,EAAmCjE,KAAK,CAACkE,gBAAzC;;AACAlE,QAAAA,KAAK,CAACyC,UAAN,CAAiBwB,GAAjB,EAAsB,SAAtB,EAAiCjE,KAAK,CAACmE,cAAvC;AACD;;AAED,UAAIf,SAAJ,EAAe;AACb7D,QAAAA,aAAa,CAAC,CAACiE,aAAF,EAAiBxD,KAAK,CAACyC,UAAvB,EAAmC,OAAnC,EAA4CzC,KAAK,CAACoE,iBAAlD,CAAb;AACA7E,QAAAA,aAAa,CAAC,CAACiE,aAAF,EAAiBxD,KAAK,CAACyC,UAAvB,EAAmC,KAAnC,EAA0CzC,KAAK,CAACqE,eAAhD,CAAb;AACD;AACF,KA/Fc,EA+FZrE,KAAK,CAACsE,gBAAN,GAAyB,YAAY;AACtC,UAAI,CAACtE,KAAK,CAACiB,KAAN,CAAYsD,oBAAjB,EAAuC;AACrC;AACD;;AAED7E,MAAAA,gBAAgB,CAAC,OAAD,EAAUM,KAAK,CAACyC,UAAhB,CAAhB;AACD,KArGc,EAqGZzC,KAAK,CAACwE,aAAN,GAAsB,YAAY;AACnC,UAAIxE,KAAK,CAACyE,QAAN,IAAkBzE,KAAK,CAACiB,KAAN,CAAYsD,oBAAlC,EAAwD;AACtD;AACA;AACA;AACAxD,QAAAA,UAAU,CAAC,YAAY;AACrBf,UAAAA,KAAK,CAACyC,UAAN,CAAiBiC,KAAjB;AACD,SAFS,EAEP,CAFO,CAAV;AAGD;;AAED1E,MAAAA,KAAK,CAACyE,QAAN,GAAiB,KAAjB;AACD,KAhHc,EAgHZzE,KAAK,CAAC4D,cAAN,GAAuB,UAAUe,CAAV,EAAa;AACrC,UAAIrH,GAAG,GAAGqH,CAAC,CAACC,KAAF,IAAWD,CAAC,CAACE,OAAvB;AACA,UAAIC,KAAK,GAAGxH,GAAG,KAAK4B,KAApB;AACA,UAAI6F,KAAK,GAAGzH,GAAG,KAAK6B,KAApB,CAHqC,CAIrC;;AACA,UAAI4F,KAAK,IAAID,KAAK,IAAI,CAAC1F,cAAc,CAACuF,CAAC,CAAC1H,MAAH,CAAxB,IAAsC,CAAC0H,CAAC,CAAC1H,MAAF,CAAS2F,aAAT,CAAuB,OAAvB,CAApD,EAAqF;AACnF5C,QAAAA,KAAK,CAACyE,QAAN,GAAiB,IAAjB;;AACAzE,QAAAA,KAAK,CAACU,SAAN;;AACAV,QAAAA,KAAK,CAACsE,gBAAN;AACD;AACF,KA1Hc,EA0HZtE,KAAK,CAAC2D,YAAN,GAAqB,YAAY;AAClC,UAAI3D,KAAK,CAACyE,QAAV,EAAoB;AAClB;AACD;;AAEDzE,MAAAA,KAAK,CAACa,UAAN;;AACAb,MAAAA,KAAK,CAACoB,qBAAN,GAA8B4D,gBAA9B,CAA+C,MAA/C,EAAuDhF,KAAK,CAACiF,WAA7D;AACD,KAjIc,EAiIZjF,KAAK,CAACiF,WAAN,GAAoB,YAAY;AACjCjF,MAAAA,KAAK,CAACoB,qBAAN,GAA8B8D,mBAA9B,CAAkD,MAAlD,EAA0DlF,KAAK,CAACiF,WAAhE;;AACAjF,MAAAA,KAAK,CAACgB,UAAN;AACD,KApIc,EAoIZhB,KAAK,CAACkE,gBAAN,GAAyB,UAAUS,CAAV,EAAa;AACvC3E,MAAAA,KAAK,CAACyE,QAAN,GAAiB,IAAjB;;AACA,UAAI,CAACnF,YAAY,CAACqF,CAAD,CAAb,IAAoB3E,KAAK,CAACmF,cAA9B,EAA8C;AAC5CnF,QAAAA,KAAK,CAACmF,cAAN,GAAuB,KAAvB;AACA;AACD;;AAEDnF,MAAAA,KAAK,CAACoF,WAAN,GAAoB,KAApB;;AACApF,MAAAA,KAAK,CAACyC,UAAN,CAAiBuC,gBAAjB,CAAkC,YAAlC,EAAgDhF,KAAK,CAACqF,iBAAtD;;AACArF,MAAAA,KAAK,CAACa,UAAN,CAAiB8D,CAAC,CAAChE,KAAnB,EAA0BgE,CAAC,CAAC/D,KAA5B;AACD,KA9Ic,EA8IZZ,KAAK,CAACqF,iBAAN,GAA0B,YAAY;AACvCrF,MAAAA,KAAK,CAACyC,UAAN,CAAiByC,mBAAjB,CAAqC,YAArC,EAAmDlF,KAAK,CAACqF,iBAAzD;;AACArF,MAAAA,KAAK,CAACoF,WAAN,GAAoB,IAApB;;AACApF,MAAAA,KAAK,CAACgB,UAAN;AACD,KAlJc,EAkJZhB,KAAK,CAACmE,cAAN,GAAuB,YAAY;AACpC,UAAInE,KAAK,CAACoF,WAAV,EAAuB;AACrB;AACD;;AAEDpF,MAAAA,KAAK,CAACsE,gBAAN;;AACAtE,MAAAA,KAAK,CAACyC,UAAN,CAAiByC,mBAAjB,CAAqC,YAArC,EAAmDlF,KAAK,CAACqF,iBAAzD;;AACArF,MAAAA,KAAK,CAACgB,UAAN;AACD,KA1Jc,EA0JZhB,KAAK,CAACoE,iBAAN,GAA0B,UAAUO,CAAV,EAAa;AACxC3E,MAAAA,KAAK,CAACsF,QAAN,GAAiB,KAAjB;AACAtF,MAAAA,KAAK,CAACyE,QAAN,GAAiB,IAAjB;AACAzE,MAAAA,KAAK,CAACmF,cAAN,GAAuB,IAAvB;AACA3F,MAAAA,aAAa,CAACsE,MAAD,EAAS,MAAT,EAAiB9D,KAAK,CAACuF,gBAAvB,CAAb;AAEA,UAAIC,kBAAkB,GAAGb,CAAC,CAACc,cAAF,CAAiB,CAAjB,CAAzB;AAAA,UACI9E,KAAK,GAAG6E,kBAAkB,CAAC7E,KAD/B;AAAA,UAEIC,KAAK,GAAG4E,kBAAkB,CAAC5E,KAF/B;;AAIAZ,MAAAA,KAAK,CAACa,UAAN,CAAiBF,KAAjB,EAAwBC,KAAxB;AACD,KArKc,EAqKZZ,KAAK,CAACuF,gBAAN,GAAyB,YAAY;AACtC9F,MAAAA,gBAAgB,CAACqE,MAAD,EAAS,MAAT,EAAiB9D,KAAK,CAACuF,gBAAvB,CAAhB;AACA,UAAIG,OAAO,GAAG1F,KAAK,CAACQ,KAAN,CAAYC,IAAZ,CAAiBT,KAAK,CAACQ,KAAN,CAAYC,IAAZ,CAAiBrD,MAAjB,GAA0B,CAA3C,CAAd;;AACA,UAAI,CAACsI,OAAD,IAAYvD,IAAI,CAACC,GAAL,KAAasD,OAAO,CAACpI,GAAR,GAAc,GAA3C,EAAgD;AAC9C0C,QAAAA,KAAK,CAACsF,QAAN,GAAiB,KAAjB;AACA;AACD;;AAED,UAAI7E,IAAI,GAAGT,KAAK,CAACQ,KAAN,CAAYC,IAAZ,CAAiB4B,KAAjB,EAAX;;AACA,UAAIsD,KAAK,GAAGlF,IAAI,CAACrD,MAAL,GAAc,CAA1B;AAEA,UAAIwI,UAAU,GAAG7I,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB0I,OAAlB,EAA2B;AAAEG,QAAAA,OAAO,EAAE;AAAX,OAA3B,CAAjB;AACApF,MAAAA,IAAI,CAACqF,MAAL,CAAYH,KAAZ,EAAmB,CAAnB,EAAsBC,UAAtB;AAEA5F,MAAAA,KAAK,CAACsF,QAAN,GAAiB,IAAjB;;AACAtF,MAAAA,KAAK,CAACuC,QAAN,CAAe;AAAE9B,QAAAA,IAAI,EAAEA;AAAR,OAAf,EAA+BT,KAAK,CAACgB,UAArC;AACD,KArLc,EAqLZhB,KAAK,CAACqE,eAAN,GAAwB,YAAY;AACrCrE,MAAAA,KAAK,CAACmF,cAAN,GAAuB,IAAvB;;AAEA,UAAInF,KAAK,CAACsF,QAAV,EAAoB;AAClB;AACD,OAFD,MAEO;AACL7F,QAAAA,gBAAgB,CAACqE,MAAD,EAAS,MAAT,EAAiB9D,KAAK,CAACuF,gBAAvB,CAAhB;AACD;;AAEDvF,MAAAA,KAAK,CAACgB,UAAN;AACD,KA/Lc,EA+LZhB,KAAK,CAAC+D,aAAN,GAAsB,UAAUY,CAAV,EAAa;AACpC,UAAIoB,QAAQ,CAACC,aAAT,KAA2BhG,KAAK,CAACyC,UAAjC,IAA+C,CAACkC,CAAC,CAAC1H,MAAF,CAAS0F,QAAT,CAAkB3C,KAAK,CAACyC,UAAxB,CAApD,EAAyF;AACvF;AACD;;AAEDzC,MAAAA,KAAK,CAACsE,gBAAN;;AACAtE,MAAAA,KAAK,CAACU,SAAN;AACD,KAtMc,EAsMZV,KAAK,CAACgE,uBAAN,GAAgC,UAAUW,CAAV,EAAa;AAC9C,cAAQA,CAAC,CAACsB,IAAV;AACE,aAAK,YAAL;AACEzG,UAAAA,aAAa,CAACsE,MAAD,EAAS,KAAT,EAAgB9D,KAAK,CAACgE,uBAAtB,EAA+C;AAAEkC,YAAAA,OAAO,EAAE;AAAX,WAA/C,CAAb;AACA;;AACF,aAAK,UAAL;AACEzG,UAAAA,gBAAgB,CAACqE,MAAD,EAAS,KAAT,EAAgB9D,KAAK,CAACgE,uBAAtB,EAA+C;AAAEkC,YAAAA,OAAO,EAAE;AAAX,WAA/C,CAAhB;AACA;;AACF,aAAK,WAAL;AACEpC,UAAAA,MAAM,CAACkB,gBAAP,CAAwB,SAAxB,EAAmChF,KAAK,CAACgE,uBAAzC,EAAkE,IAAlE;AACA;;AACF,aAAK,SAAL;AACEF,UAAAA,MAAM,CAACoB,mBAAP,CAA2B,SAA3B,EAAsClF,KAAK,CAACgE,uBAA5C,EAAqE,IAArE;AACA;;AACF;AAbF;AAeD,KAtNc,EAsNZjE,KAtNQ,CAAJ,EAsNIjC,0BAA0B,CAACkC,KAAD,EAAQC,IAAR,CAtNrC;AAuND;;AAEDJ,EAAAA,YAAY,CAACtC,SAAb,CAAuB4I,yBAAvB,GAAmD,SAASA,yBAAT,CAAmCC,SAAnC,EAA8C;AAC/F,QAAIC,EAAE,GAAG,KAAKpF,KAAL,CAAWsC,oBAApB;AACA,QAAI+C,GAAG,GAAGF,SAAS,CAAC7C,oBAApB;;AAEA,QAAI8C,EAAE,KAAKC,GAAP,IAAc,CAAC,KAAK7D,UAAxB,EAAoC;AAClC;AACD;;AAED,QAAI8D,iBAAiB,GAAG,KAAKC,uBAAL,CAA6B,OAA7B,EAAsCH,EAAtC,EAA0CC,GAA1C,CAAxB;;AACA,QAAIG,iBAAiB,GAAG,KAAKD,uBAAL,CAA6B,OAA7B,EAAsCH,EAAtC,EAA0CC,GAA1C,CAAxB;;AACA,QAAII,oBAAoB,GAAG,KAAKF,uBAAL,CAA6B,UAA7B,EAAyCH,EAAzC,EAA6CC,GAA7C,CAA3B;;AACA,SAAKtD,mBAAL,CAAyBoD,SAAzB,EAAoCM,oBAApC,EAA0DH,iBAA1D,EAA6EE,iBAA7E;AACD,GAZD;;AAcA5G,EAAAA,YAAY,CAACtC,SAAb,CAAuBoJ,oBAAvB,GAA8C,SAASA,oBAAT,GAAgC;AAC5E,QAAI,KAAK7F,cAAT,EAAyB;AACvB8F,MAAAA,YAAY,CAAC,KAAK9F,cAAN,CAAZ;AACD;;AAED,QAAI,KAAK2B,UAAT,EAAqB;AACnB,WAAKO,mBAAL,CAAyB;AAAEO,QAAAA,oBAAoB,EAAE,CAAC,UAAD,EAAa,OAAb,EAAsB,OAAtB;AAAxB,OAAzB;;AACA,WAAKnC,qBAAL,GAA6B8D,mBAA7B,CAAiD,MAAjD,EAAyD,KAAKD,WAA9D;AACD;AACF,GATD;AAWA;;;;;;;;;;;;;AAcA;;;;;AAKApF,EAAAA,YAAY,CAACtC,SAAb,CAAuBiJ,uBAAvB,GAAiD,SAASA,uBAAT,CAAiCK,WAAjC,EAA8CtD,oBAA9C,EAAoEuD,wBAApE,EAA8F;AAC7I,QAAI5J,CAAC,GAAGqG,oBAAoB,CAACwD,OAArB,CAA6BF,WAA7B,CAAR;AACA,QAAIG,EAAE,GAAGF,wBAAwB,CAACC,OAAzB,CAAiCF,WAAjC,CAAT;AAEA,WAAO3J,CAAC,GAAG,CAAJ,IAAS8J,EAAE,IAAI,CAAf,IAAoB9J,CAAC,IAAI,CAAL,IAAU8J,EAAE,GAAG,CAA1C;AACD,GALD;;AAOAnH,EAAAA,YAAY,CAACtC,SAAb,CAAuB+F,mBAAvB,GAA6C,SAASA,mBAAT,CAA6BuD,WAA7B,EAA0CtD,oBAA1C,EAAgE;AAC3G,WAAOA,oBAAoB,IAAIA,oBAAoB,CAACwD,OAArB,CAA6BF,WAA7B,MAA8C,CAAC,CAA9E;AACD,GAFD;AAIA;;;;;;;;;;;AAYA;;;;AAKA;;;;;AAMA;;;;;AAMA;;;;;;;;;;;;;AAcA;;;;;;;;AAQAhH,EAAAA,YAAY,CAACtC,SAAb,CAAuB0J,MAAvB,GAAgC,SAASA,MAAT,GAAkB;AAChD,QAAIC,MAAM,GAAG,IAAb;;AAEA,QAAIC,MAAM,GAAG,KAAKlG,KAAlB;AAAA,QACImG,KAAK,GAAGD,MAAM,CAACC,KADnB;AAAA,QAEIC,SAAS,GAAGF,MAAM,CAACE,SAFvB;AAAA,QAGIC,QAAQ,GAAGH,MAAM,CAACG,QAHtB;AAAA,QAIIC,YAAY,GAAGJ,MAAM,CAACI,YAJ1B;AAAA,QAKIrG,iBAAiB,GAAGiG,MAAM,CAACjG,iBAL/B;AAAA,QAMIsG,sBAAsB,GAAGL,MAAM,CAACK,sBANpC;AAAA,QAOIC,sBAAsB,GAAGN,MAAM,CAACM,sBAPpC;AAAA,QAQIC,KAAK,GAAGP,MAAM,CAACO,KARnB;AAUA,QAAIjH,IAAI,GAAG,KAAKD,KAAL,CAAWC,IAAX,CAAgBkH,GAAhB,CAAoB,UAAU1G,KAAV,EAAiB;AAC9C,aAAOrC,KAAK,CAACgJ,aAAN,CAAoBhI,GAApB,EAAyB9C,QAAQ,CAAC,EAAD,EAAKmE,KAAL,EAAY;AAClDyG,QAAAA,KAAK,EAAEA,KAD2C;AAElDN,QAAAA,KAAK,EAAEE,QAF2C;AAGlDD,QAAAA,SAAS,EAAEE,YAHuC;AAIlDM,QAAAA,QAAQ,EAAEX,MAAM,CAAC1C,aAJiC;AAKlDtD,QAAAA,iBAAiB,EAAEA,iBAL+B;AAMlDsG,QAAAA,sBAAsB,EAAEA,sBAN0B;AAOlDC,QAAAA,sBAAsB,EAAEA;AAP0B,OAAZ,CAAjC,CAAP;AASD,KAVU,CAAX;AAYA,WAAO7I,KAAK,CAACgJ,aAAN,CACL5I,eADK,EAEL;AACE8I,MAAAA,SAAS,EAAE,KADb;AAEEV,MAAAA,KAAK,EAAEA,KAFT;AAGEC,MAAAA,SAAS,EAAEpI,EAAE,CAAC,kBAAD,EAAqBoI,SAArB,CAHf;AAIEU,MAAAA,GAAG,EAAE,KAAKlF;AAJZ,KAFK,EAQLpC,IARK,CAAP;AAUD,GAnCD;;AAqCA,SAAOZ,YAAP;AACD,CArXkB,CAqXjBhB,aArXiB,CAAnB;;AAuXAgB,YAAY,CAACmI,SAAb,GAAyB;AACvBZ,EAAAA,KAAK,EAAErI,SAAS,CAACkJ,MADM;AAEvBZ,EAAAA,SAAS,EAAEtI,SAAS,CAACmJ,MAFE;AAGvBZ,EAAAA,QAAQ,EAAEvI,SAAS,CAACkJ,MAHG;AAIvBV,EAAAA,YAAY,EAAExI,SAAS,CAACmJ,MAJD;AAKvB3D,EAAAA,oBAAoB,EAAExF,SAAS,CAACoJ,IALT;AAMvB5E,EAAAA,oBAAoB,EAAExE,SAAS,CAACqJ,OAAV,CAAkBrJ,SAAS,CAACsJ,KAAV,CAAgB,CAAC,UAAD,EAAa,OAAb,EAAsB,OAAtB,CAAhB,CAAlB,CANC;AAOvBnH,EAAAA,iBAAiB,EAAEnC,SAAS,CAACuJ,MAAV,CAAiBC,UAPb;AAQvBf,EAAAA,sBAAsB,EAAEzI,SAAS,CAACuJ,MAAV,CAAiBC,UARlB;AASvBd,EAAAA,sBAAsB,EAAE1I,SAAS,CAACuJ,MAAV,CAAiBC,UATlB;AAUvBb,EAAAA,KAAK,EAAE3I,SAAS,CAACoJ;AAVM,CAAzB;AAYAtI,YAAY,CAAC2I,YAAb,GAA4B;AAC1BtH,EAAAA,iBAAiB,EAAE,GADO;AAE1BsG,EAAAA,sBAAsB,EAAE,GAFE;AAG1BC,EAAAA,sBAAsB,EAAE;AAHE,CAA5B;AAKA,eAAe5H,YAAf","sourcesContent":["var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport React, { PureComponent } from 'react';\nimport { findDOMNode } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport TransitionGroup from 'react-transition-group/TransitionGroup';\nimport cn from 'classnames';\n\nimport { ENTER, SPACE } from '../constants/keyCodes';\nimport isFormPartRole from '../utils/isFormPartRole';\nimport calcPageOffset from '../utils/Positioning/calcPageOffset';\nimport isValidClick from '../utils/EventUtils/isValidClick';\nimport { setTouchEvent, addTouchEvent, removeTouchEvent } from '../utils/EventUtils/touches';\nimport captureNextEvent from '../utils/EventUtils/captureNextEvent';\nimport calculateHypotenuse from '../utils/NumberUtils/calculateHypotenuse';\n\nimport Ink from './Ink';\n\n/**\n * The `InkContainer` is used for holding the list of inks that get created by touch,\n * click, or keyboard focus.\n *\n * If the container element has the `type=\"submit\"` attribute, the ink will also be\n * triggered when the user presses enter anywhere in the form.\n */\n\nvar InkContainer = function (_PureComponent) {\n  _inherits(InkContainer, _PureComponent);\n\n  function InkContainer() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, InkContainer);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _PureComponent.call.apply(_PureComponent, [this].concat(args))), _this), _this.state = { inks: [] }, _this.createInk = function (pageX, pageY) {\n      _this._createInk(pageX, pageY);\n      _this._removeTimeout = setTimeout(function () {\n        _this._removeTimeout = null;\n        _this._removeInk();\n      }, _this.props.transitionOverlap);\n    }, _this.focus = function () {\n      _this._getKeyboardContainer().focus();\n    }, _this._createInk = function (pageX, pageY) {\n      var _this$_inkContainer = _this._inkContainer,\n          offsetWidth = _this$_inkContainer.offsetWidth,\n          offsetHeight = _this$_inkContainer.offsetHeight;\n\n\n      var x = void 0;\n      var y = void 0;\n      if (typeof pageX !== 'undefined' && typeof pageY !== 'undefined') {\n        var pageOffset = calcPageOffset(_this._inkContainer);\n\n        x = pageX - pageOffset.left;\n        y = pageY - pageOffset.top;\n      } else {\n        x = offsetWidth / 2;\n        y = offsetHeight / 2;\n      }\n\n      var r = Math.max(calculateHypotenuse(x, y), calculateHypotenuse(offsetWidth - x, y), calculateHypotenuse(offsetWidth - x, offsetHeight - y), calculateHypotenuse(x, offsetHeight - y));\n\n      var ink = {\n        left: x - r,\n        top: y - r,\n        size: r * 2,\n        key: Date.now()\n      };\n\n      var inks = _this.state.inks.slice();\n      inks.push(ink);\n      _this.setState({ inks: inks });\n    }, _this._removeInk = function () {\n      var inks = _this.state.inks.slice();\n      inks.pop();\n\n      _this.setState({ inks: inks });\n    }, _this._getKeyboardContainer = function () {\n      if (_this._container.classList.contains('md-text-field-container')) {\n        return _this._container.querySelector('.md-text-field');\n      }\n\n      return _this._container;\n    }, _this._setContainers = function (group) {\n      if (group !== null) {\n        _this._inkContainer = findDOMNode(group);\n        _this._container = _this._inkContainer.parentElement;\n\n        if (_this._container) {\n          _this._initOrRemoveEvents(_this.props);\n        }\n      }\n    }, _this._initOrRemoveEvents = function (props) {\n      var keyboardDiff = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var mouseDiff = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      var touchDiff = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n\n      var mouseDisabled = _this._isListenerDisabled('mouse', props.disabledInteractions);\n      var touchDisabled = _this._isListenerDisabled('touch', props.disabledInteractions);\n      var keyboardDisabled = _this._isListenerDisabled('keyboard', props.disabledInteractions);\n\n      if (keyboardDiff) {\n        var fn = (keyboardDisabled ? 'remove' : 'add') + 'EventListener';\n        _this._getKeyboardContainer()[fn]('focus', _this._handleFocus);\n        _this._getKeyboardContainer()[fn]('keydown', _this._handleKeyDown);\n\n        if (_this._container.getAttribute('type') === 'submit') {\n          window[fn]('submit', _this._handleSubmit);\n        }\n\n        if (mouseDiff) {\n          _this._container[(!mouseDisabled ? 'add' : 'remove') + 'EventListener']('mousedown', _this._stopPropagationToFocus);\n        }\n\n        if (touchDiff) {\n          setTouchEvent(!touchDisabled, _this._container, 'start', _this._stopPropagationToFocus);\n        }\n      }\n\n      if (mouseDiff) {\n        var _fn = (mouseDisabled ? 'remove' : 'add') + 'EventListener';\n        _this._container[_fn]('mousedown', _this._handleMouseDown);\n        _this._container[_fn]('mouseup', _this._handleMouseUp);\n      }\n\n      if (touchDiff) {\n        setTouchEvent(!touchDisabled, _this._container, 'start', _this._handleTouchStart);\n        setTouchEvent(!touchDisabled, _this._container, 'end', _this._handleTouchEnd);\n      }\n    }, _this._maybeDelayClick = function () {\n      if (!_this.props.waitForInkTransition) {\n        return;\n      }\n\n      captureNextEvent('click', _this._container);\n    }, _this._handleRemove = function () {\n      if (_this._clicked && _this.props.waitForInkTransition) {\n        // For some reason if the click event will make the ink unmount, it will no longer\n        // have a debug id in the TransitionGroup and it displays a warning. Adding a 1ms timeout\n        // fixes that issue... It only happens on an actual click instead of an enter click.\n        setTimeout(function () {\n          _this._container.click();\n        }, 1);\n      }\n\n      _this._clicked = false;\n    }, _this._handleKeyDown = function (e) {\n      var key = e.which || e.keyCode;\n      var enter = key === ENTER;\n      var space = key === SPACE;\n      // Don't trigger ink when enter key is pressed and the target has an input inside of it (SelectField)\n      if (space || enter && !isFormPartRole(e.target) && !e.target.querySelector('input')) {\n        _this._clicked = true;\n        _this.createInk();\n        _this._maybeDelayClick();\n      }\n    }, _this._handleFocus = function () {\n      if (_this._clicked) {\n        return;\n      }\n\n      _this._createInk();\n      _this._getKeyboardContainer().addEventListener('blur', _this._handleBlur);\n    }, _this._handleBlur = function () {\n      _this._getKeyboardContainer().removeEventListener('blur', _this._handleBlur);\n      _this._removeInk();\n    }, _this._handleMouseDown = function (e) {\n      _this._clicked = true;\n      if (!isValidClick(e) || _this._skipNextMouse) {\n        _this._skipNextMouse = false;\n        return;\n      }\n\n      _this._mouseLeave = false;\n      _this._container.addEventListener('mouseleave', _this._handleMouseLeave);\n      _this._createInk(e.pageX, e.pageY);\n    }, _this._handleMouseLeave = function () {\n      _this._container.removeEventListener('mouseleave', _this._handleMouseLeave);\n      _this._mouseLeave = true;\n      _this._removeInk();\n    }, _this._handleMouseUp = function () {\n      if (_this._mouseLeave) {\n        return;\n      }\n\n      _this._maybeDelayClick();\n      _this._container.removeEventListener('mouseleave', _this._handleMouseLeave);\n      _this._removeInk();\n    }, _this._handleTouchStart = function (e) {\n      _this._aborted = false;\n      _this._clicked = true;\n      _this._skipNextMouse = true;\n      addTouchEvent(window, 'move', _this._handleTouchMove);\n\n      var _e$changedTouches$ = e.changedTouches[0],\n          pageX = _e$changedTouches$.pageX,\n          pageY = _e$changedTouches$.pageY;\n\n      _this._createInk(pageX, pageY);\n    }, _this._handleTouchMove = function () {\n      removeTouchEvent(window, 'move', _this._handleTouchMove);\n      var lastInk = _this.state.inks[_this.state.inks.length - 1];\n      if (!lastInk || Date.now() > lastInk.key + 200) {\n        _this._aborted = false;\n        return;\n      }\n\n      var inks = _this.state.inks.slice();\n      var index = inks.length - 1;\n\n      var abortedInk = Object.assign({}, lastInk, { aborted: true });\n      inks.splice(index, 1, abortedInk);\n\n      _this._aborted = true;\n      _this.setState({ inks: inks }, _this._removeInk);\n    }, _this._handleTouchEnd = function () {\n      _this._skipNextMouse = true;\n\n      if (_this._aborted) {\n        return;\n      } else {\n        removeTouchEvent(window, 'move', _this._handleTouchMove);\n      }\n\n      _this._removeInk();\n    }, _this._handleSubmit = function (e) {\n      if (document.activeElement === _this._container || !e.target.contains(_this._container)) {\n        return;\n      }\n\n      _this._maybeDelayClick();\n      _this.createInk();\n    }, _this._stopPropagationToFocus = function (e) {\n      switch (e.type) {\n        case 'touchstart':\n          addTouchEvent(window, 'end', _this._stopPropagationToFocus, { capture: true });\n          break;\n        case 'touchend':\n          removeTouchEvent(window, 'end', _this._stopPropagationToFocus, { capture: true });\n          break;\n        case 'mousedown':\n          window.addEventListener('mouseup', _this._stopPropagationToFocus, true);\n          break;\n        case 'mouseup':\n          window.removeEventListener('mouseup', _this._stopPropagationToFocus, true);\n          break;\n        default:\n      }\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  InkContainer.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    var di = this.props.disabledInteractions;\n    var ndi = nextProps.disabledInteractions;\n\n    if (di === ndi || !this._container) {\n      return;\n    }\n\n    var mouseDisabledDiff = this._isListenerDisabledDiff('mouse', di, ndi);\n    var touchDisabledDiff = this._isListenerDisabledDiff('touch', di, ndi);\n    var keyboardDisabledDiff = this._isListenerDisabledDiff('keyboard', di, ndi);\n    this._initOrRemoveEvents(nextProps, keyboardDisabledDiff, mouseDisabledDiff, touchDisabledDiff);\n  };\n\n  InkContainer.prototype.componentWillUnmount = function componentWillUnmount() {\n    if (this._removeTimeout) {\n      clearTimeout(this._removeTimeout);\n    }\n\n    if (this._container) {\n      this._initOrRemoveEvents({ disabledInteractions: ['keyboard', 'mouse', 'touch'] });\n      this._getKeyboardContainer().removeEventListener('blur', this._handleBlur);\n    }\n  };\n\n  /**\n   * Creates an ink from pageX and pageY coordinates. These values should either come\n   * from the `changedTouches` or just the base event (if clicked). These coordinates\n   * are used to position the ink correctly in the container from touch/click point.\n   * If either value is undefined, an ink will be created from the center of the\n   * container.\n   *\n   * It will also automatically remove the ink.\n   *\n   * @param {number} pageX - The page x coordinate of the click or touch event.\n   * @param {number} pageY - The page y coordinate of the click or touch event.\n   */\n\n\n  /**\n   * Focuses the main element.\n   */\n\n\n  InkContainer.prototype._isListenerDisabledDiff = function _isListenerDisabledDiff(interaction, disabledInteractions, nextDisabledInteractions) {\n    var i = disabledInteractions.indexOf(interaction);\n    var ni = nextDisabledInteractions.indexOf(interaction);\n\n    return i < 0 && ni >= 0 || i >= 0 && ni < 0;\n  };\n\n  InkContainer.prototype._isListenerDisabled = function _isListenerDisabled(interaction, disabledInteractions) {\n    return disabledInteractions && disabledInteractions.indexOf(interaction) !== -1;\n  };\n\n  /**\n   * Creates an ink from pageX and pageY coordinates. These values should either come\n   * from the `changedTouches` or just the base event (if clicked). These coordinates\n   * are used to position the ink correctly in the container from touch/click point.\n   * If either value is undefined, an ink will be created from the center of the\n   * container.\n   *\n   * @param {number} pageX - The page x coordinate of the click or touch event.\n   * @param {number} pageY - The page y coordinate of the click or touch event.\n   */\n\n\n  /**\n   * Removes an ink from the container.\n   */\n\n\n  /**\n   * Gets the container for any keyboard events. This will almost always be the main element,\n   * but text fields will need to be the input itself.\n   */\n\n\n  /**\n   * Sets the ink container and the main container from the ref callback. When the component\n   * is mounting, the keyboard, mouse, and keyboard events will be initialized.\n   */\n\n\n  /**\n   * This function will either add or remove the event listeners for creating inks.\n   *\n   * @param {Object} props - The current props to use for figuring out if the events should\n   *    be added or removed.\n   * @param {bool=} keyboardDiff - Boolean if there was a difference between the current props and either\n   *    the previous or next props for the keyboard interactions being disabled.\n   * @param {bool=} mouseDiff - Boolean if there was a difference between the current props and either\n   *    the previous or next props for the mouse interactions being disabled.\n   * @param {bool=} touchDiff - Boolean if there was a difference between the current props and either\n   *    the previous or next props for the touch interactions being disabled.\n   */\n\n\n  /**\n   * If a form was submitted that contains the container of the ink and the current focus element\n   * is not the container, trigger an ink effect.\n   *\n   * The current focus check is added so that two inks are not created.\n   */\n\n\n  InkContainer.prototype.render = function render() {\n    var _this2 = this;\n\n    var _props = this.props,\n        style = _props.style,\n        className = _props.className,\n        inkStyle = _props.inkStyle,\n        inkClassName = _props.inkClassName,\n        transitionOverlap = _props.transitionOverlap,\n        transitionEnterTimeout = _props.transitionEnterTimeout,\n        transitionLeaveTimeout = _props.transitionLeaveTimeout,\n        pulse = _props.pulse;\n\n    var inks = this.state.inks.map(function (props) {\n      return React.createElement(Ink, _extends({}, props, {\n        pulse: pulse,\n        style: inkStyle,\n        className: inkClassName,\n        onRemove: _this2._handleRemove,\n        transitionOverlap: transitionOverlap,\n        transitionEnterTimeout: transitionEnterTimeout,\n        transitionLeaveTimeout: transitionLeaveTimeout\n      }));\n    });\n\n    return React.createElement(\n      TransitionGroup,\n      {\n        component: 'div',\n        style: style,\n        className: cn('md-ink-container', className),\n        ref: this._setContainers\n      },\n      inks\n    );\n  };\n\n  return InkContainer;\n}(PureComponent);\n\nInkContainer.propTypes = {\n  style: PropTypes.object,\n  className: PropTypes.string,\n  inkStyle: PropTypes.object,\n  inkClassName: PropTypes.string,\n  waitForInkTransition: PropTypes.bool,\n  disabledInteractions: PropTypes.arrayOf(PropTypes.oneOf(['keyboard', 'mouse', 'touch'])),\n  transitionOverlap: PropTypes.number.isRequired,\n  transitionEnterTimeout: PropTypes.number.isRequired,\n  transitionLeaveTimeout: PropTypes.number.isRequired,\n  pulse: PropTypes.bool\n};\nInkContainer.defaultProps = {\n  transitionOverlap: 150,\n  transitionEnterTimeout: 450,\n  transitionLeaveTimeout: 300\n};\nexport default InkContainer;"]},"metadata":{},"sourceType":"module"}